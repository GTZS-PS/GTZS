<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>GTZS Private Server - CYBERPUNK OPTIMIZED</title>

<script src="https://cdn.tailwindcss.com"></script>
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Rajdhani:wght@400;700&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/tsparticles@2.12.0/tsparticles.bundle.min.js"></script>

<style>
/* ---------------------------------------------------- */
/* ===== BASE STYLES & OVERLAYS (Dipertahankan) ===== */
/* ---------------------------------------------------- */
body {
    font-family: 'Rajdhani', sans-serif;
    overflow-x: hidden;
    min-height: 100vh; 
    background-color: #04040a; 
}

:root {
    --color-primary: #00e6ff; /* Cyan Default */
    --color-secondary: #ff00d4; /* Magenta Default */
    --color-success: #00ff90; /* Green */
    --color-warning: #ff8c00; /* Orange */
}

/* CYBERPUNK BACKGROUND DENGAN BLUR */
body::after {
    content: '';
    position: fixed;
    inset: 0;
    z-index: 1; 
    pointer-events: none;
    background-image: url('https://files.catbox.moe/cep5dq.jpg'); 
    background-size: cover;
    background-position: center;
    filter: blur(8px) brightness(0.6); 
    opacity: 0.35; 
    transition: filter 0.5s ease;
}

#grid-bg {
    position: absolute;
    inset: 0;
    z-index: 3;
    pointer-events: none;
    background-image: linear-gradient(rgba(0,255,255,0.08) 1px, transparent 1px),
                      linear-gradient(90deg, rgba(255,0,212,0.08) 1px, transparent 1px);
    background-size: 30px 30px; 
    opacity: 0.6;
}
#scanline-overlay, #vignette-overlay { 
    position: absolute; 
    inset: 0; 
    z-index: 4; 
    pointer-events: none; 
}
#scanline-overlay { background: repeating-linear-gradient(to bottom, transparent 0, transparent 2px, rgba(0, 0, 0, 0.3) 2px, rgba(0, 0, 0, 0.3) 3px); opacity: 0.7; }
#vignette-overlay { box-shadow: inset 0 0 300px rgba(0, 0, 0, 0.95); }

/* --- POSISI TOMBOL FIXED --- */
.control-btn {
    padding: 0.5rem 0.75rem;
    background-color: rgba(10, 10, 10, 0.8); 
    backdrop-filter: blur(5px);
    border: 2px solid;
    font-family: 'Orbitron', sans-serif;
}
#music-toggle-container, #color-toggle-container {
    top: 1.5rem; 
    padding: 0; 
    z-index: 50;
    position: fixed; 
}
#music-toggle-container { left: 1.5rem; border-color: var(--color-primary); color: var(--color-primary); }
#color-toggle-container { right: 1.5rem; border-color: var(--color-secondary); }

/* ---------------------------------------------------- */
/* ===== BARU: LOADING SCREEN MATCH (GAMBAR) ===== */
/* ---------------------------------------------------- */
#loading-overlay {
    background-color: #0d0d1a; 
    background-image: radial-gradient(circle at center, #001f3f 0%, #0d0d1a 100%);
}
#loading-text {
    font-size: 4rem; 
    text-shadow: 0 0 15px var(--color-primary), 0 0 30px var(--color-primary);
}
#loading-subtext { 
    font-family: 'Rajdhani', sans-serif;
    color: var(--color-secondary);
    text-shadow: 0 0 5px var(--color-secondary);
    margin-top: 1rem;
}
#loading-logo { 
    font-size: 8rem;
    color: var(--color-secondary);
    text-shadow: 0 0 20px var(--color-secondary), 0 0 40px var(--color-secondary);
    margin-bottom: 1rem;
    animation: cubePulse 2s infinite alternate;
}
@keyframes cubePulse {
    0% { transform: scale(1); opacity: 0.8; }
    100% { transform: scale(1.05); opacity: 1; }
}
#loading-bar-container {
    width: 250px; 
    height: 10px; 
    border: 2px solid var(--color-secondary);
    background-color: var(--color-secondary)20;
    margin-top: 1.5rem;
    border-radius: 5px;
}
#loading-bar {
    background-color: var(--color-primary); 
    box-shadow: 0 0 10px var(--color-primary); 
    border-radius: 3px;
}

/* ---------------------------------------------------- */
/* ===== BARU: MAIN CONTENT FRAME (Bingkai Utama) ===== */
/* ---------------------------------------------------- */

#main-container {
    position: relative;
    width: 100vw;
    min-height: 100vh;
    overflow: hidden;
    background-color: transparent;
    z-index: 10;
    opacity: 0; 
    transition: opacity 1s ease-in-out;
    display: flex; 
    flex-direction: column;
    align-items: center; /* Posisikan Frame di tengah layar */
    justify-content: center;
}
#main-content-frame {
    width: 90%; 
    max-width: 650px; /* Ukuran frame disesuaikan agar mirip gambar */
    padding: 1.5rem; 
    background: linear-gradient(145deg, rgba(0,0,0,0.8) 0%, rgba(0,0,0,0.6) 100%);
    border: 3px solid var(--color-primary); 
    border-radius: 20px;
    box-shadow: 0 0 30px var(--color-primary)50, inset 0 0 15px var(--color-secondary)50; 
    position: relative;
    z-index: 10;
    /* Animasi Slide In untuk frame utama */
    animation: slideInUp 0.8s ease-out forwards;
    opacity: 0; 
}

/* --- Menu Card Baru (Meniru Tampilan Gambar) --- */
.holographic-card {
    border: 1px solid var(--color-secondary); 
    background: rgba(0,0,0,0.7);
    box-shadow: inset 0 0 5px var(--color-secondary), 0 0 2px var(--color-primary); 
    transition: all 0.3s ease;
    cursor: default; /* Kursor default karena aksi ada di tombol */
    /* Hapus semua animasi dan efek hover lama yang mengganggu tata letak baru */
    transform: none !important;
    animation: none !important;
}
.holographic-card:hover {
    box-shadow: inset 0 0 10px var(--color-secondary), 0 0 5px var(--color-primary);
}
.holographic-card::before { display: none; } /* Hapus efek shimmer */

</style>
</head>
<body>

<div id="music-toggle-container" class="control-btn flex items-center gap-2 rounded-xl hover:scale-105 transition-transform duration-300">
    <button id="music-toggle-btn" class="bg-transparent text-white flex items-center gap-2">
        <i id="music-icon" class="text-base transition-colors duration-300">ðŸ”‡</i>
        <span id="music-text" class="text-xs font-semibold tracking-wider text-white">OFF</span>
    </button>
</div>

<div id="color-toggle-container" class="control-btn flex items-center gap-2 rounded-xl hover:scale-105 transition-transform duration-300">
    <button id="color-toggle-btn" class="bg-transparent text-white flex items-center gap-2">
        <span class="text-xs font-semibold tracking-wider text-white">ðŸŒˆ Switch Color</span>
    </button>
</div>

<div id="loading-overlay" class="fixed inset-0 z-[100] flex items-center justify-center transition-opacity duration-1000">
    <div class="flex flex-col items-center">
        <div id="loading-logo" class="font-orbitron">
            &#x25A3;
        </div>
        <h2 id="loading-text" class="text-3xl sm:text-4xl font-extrabold tracking-wider font-orbitron text-[var(--color-primary)]">LOADING SERVER...</h2>
        <p id="loading-subtext" class="text-sm font-extrabold text-[var(--color-secondary)]">Memuat aset neon & koneksi virtual...</p>
        
        <div id="loading-bar-container" class="mt-4 rounded overflow-hidden">
            <div id="loading-bar" class="h-full transition-all duration-300 ease-linear"></div>
        </div>
    </div>
</div>

<audio id="background-music" loop src="https://files.catbox.moe/gt808p.mp3"></audio>
<audio id="click-fx" src="https://files.catbox.moe/4e889j.mp3"></audio>
<audio id="glitch-fx" src="https://files.catbox.moe/s968l9.mp3"></audio>

<div id="main-container" class="relative z-10 text-white">
    <div id="cover-bg"></div> 
    <div id="grid-bg"></div>
    <div id="tsparticles-gtzps" class="absolute inset-0 z-5"></div> 
    <div id="scanline-overlay"></div>
    <div id="vignette-overlay"></div>
    
    <div id="main-content-frame">
        
        <div class="flex flex-col items-center sm:flex-row sm:justify-between gap-3 mb-6 pb-4 border-b border-[var(--color-primary)]/50">
            <div class="flex items-center gap-4">
                <div class="text-3xl text-[var(--color-secondary)]" style="text-shadow: 0 0 5px var(--color-secondary);">
                    &#x25A3;
                </div>
                <h2 class="font-orbitron text-xl font-bold tracking-wider text-[var(--color-primary)]">
                    GTZS PRIVATE SERVER
                </h2>
            </div>
            <button id="about-btn" class="py-1 px-3 text-sm font-bold rounded-lg border border-[var(--color-secondary)] text-[var(--color-secondary)] hover:bg-[var(--color-secondary)]/20 transition duration-300 font-orbitron" onclick="showModal('about-modal'); playClickSound();">
                [ ACCESS PROTOCOL ]
            </button>
        </div>
        
        <div class="grid grid-cols-3 gap-3 text-center text-xs sm:text-sm font-bold font-orbitron mb-6">
            <div class="p-2 rounded-lg data-frame border-2 border-[var(--color-primary)] bg-black/50">
                <p class="text-white/60">PLAYERS</p>
                <p id="player-count" class="text-[var(--color-primary)] text-lg">...</p>
            </div>
            <div class="p-2 rounded-lg data-frame relative border-2 border-[var(--color-primary)] bg-black/50">
                <p class="text-white/60">STATUS</p>
                <p id="server-status" class="text-[var(--color-success)] text-lg"></p>
                <span id="status-pulse" class="absolute w-2 h-2 rounded-full top-2 right-2 bg-[var(--color-success)]" style="animation: pulse-status 2s infinite;"></span>
            </div>
            <div class="p-2 rounded-lg data-frame border-2 border-[var(--color-primary)] bg-black/50">
                <p class="text-white/60">LOAD</p>
                <div class="w-full h-2 bg-black/50 mt-1 rounded-full">
                    <div id="server-health-bar" class="h-full rounded-full transition-all duration-500" style="width: 50%; background-color: var(--color-primary);"></div>
                </div>
            </div>
        </div>

        <section id="menu-grid" class="grid grid-cols-1 sm:grid-cols-2 gap-4">
            </section>

        <div class="mt-6 pt-4 border-t border-[var(--color-secondary)]/50 text-center text-xs">
            <div id="time-display-container" class="flex justify-center gap-4 font-bold text-sm">
                <span id="wib-clock" class="text-[var(--color-success)]" style="text-shadow: 0 0 5px var(--color-success);">WIB: --</span>
                <span id="wita-clock" class="text-[var(--color-primary)]" style="text-shadow: 0 0 5px var(--color-primary);">WITA: --</span>
                <span id="wit-clock" class="text-[var(--color-secondary)]" style="text-shadow: 0 0 5px var(--color-secondary);">WIT: --</span>
            </div>
            <p class="mt-2 text-white/50">GTZS PS | Â© <span id="current-year"></span> | V2.1.0 | CYBER-OPT</p>
        </div>

    </div>
    
    <div id="terminal-log-container" class="hidden sm:block fixed bottom-0 right-0 p-4 w-72 bg-black/80 border-t-4 border-l-4 border-[var(--color-success)] rounded-tl-lg z-20 shadow-2xl shadow-[var(--color-success)]/20">
        <p class="font-orbitron text-xs text-[var(--color-success)] mb-1">SYSTEM_LOG:</p>
        <div id="terminal-log" class="text-[var(--color-success)] text-xs h-32 overflow-y-scroll space-y-1 font-mono">
        </div>
    </div>
</div>

<div id="about-modal" class="modal-overlay">
    <div class="flex justify-center items-center h-full p-4 sm:p-8">
        <div class="modal-content w-full max-w-lg bg-black/90 border-2 border-[var(--color-primary)] shadow-2xl shadow-[var(--color-primary)]/40 rounded-xl p-6 relative">
            <h2 class="font-orbitron text-2xl mb-4 text-center text-[var(--color-primary)]" style="text-shadow: 0 0 5px var(--color-primary);">GTZS ACCESS INITIATION PROTOCOL</h2>
            <ol class="space-y-3 list-decimal list-inside text-sm sm:text-base text-white/90">
                <li class="text-[var(--color-primary)]">Verifikasi Klien Utama (Pastikan Anda menggunakan versi klien game yang terautentikasi dan kompatibel).</li>
                <li class="text-[var(--color-primary)]">Ambil File Konfigurasi (Download **Virtual Host Config File (.txt)** dari data link di Menu Utama).</li>
                <li class="text-[var(--color-primary)]">Muat Konfigurasi (Load file config ke dalam **Virtual Host Application** di perangkat Anda).</li>
                <li class="text-[var(--color-primary)]">Aktifkan Gerbang (Aktifkan **Virtual Host Bridge** dan jalankan Klien Game GTZS Anda).</li>
                <li class="text-[var(--color-primary)]">Sinkronisasi (Pastikan **Server Status** di halaman ini menunjukkan **[ONLINE]**. Anda siap masuk ke dalam Jaringan GTZS-PS. **Welcome to the Grid.**)</li>
            </ol>
            <button class="absolute top-2 right-4 text-xl text-white/70 hover:text-[var(--color-secondary)]" onclick="closeModal('about-modal')">&times;</button>
        </div>
    </div>
</div>

<div id="rules-modal" class="modal-overlay">
    <div class="flex justify-center items-center h-full p-4 sm:p-8">
        <div class="modal-content w-full max-w-lg bg-black/90 border-2 border-[var(--color-secondary)] shadow-2xl shadow-[var(--color-secondary)]/40 rounded-xl p-6 relative">
            <h2 class="font-orbitron text-2xl mb-4 text-center text-[var(--color-secondary)]" style="text-shadow: 0 0 5px var(--color-secondary);">GTZS PROTOCOL: ACCESS MANIFEST</h2>
            <h3 class="font-bold mt-4 text-[var(--color-primary)]">1. ID/PENGHUNI: Verifikasi Identitas</h3>
            <ul class="list-disc list-inside ml-4 text-sm space-y-1">
                <li>Setiap ID (In-Game Name) harus melewati filter etika (dilarang SARA, provokatif, atau ujaran kebencian). Pelanggaran = **Account Lock/Wipe**.</li>
                <li>Akun yang **Inactive (Non-Logged In)** selama **90 Hari Siklus** akan ditandai untuk **Defragmentasi Data** (Reset/Hapus).</li>
            </ul>
            <h3 class="font-bold mt-4 text-[var(--color-primary)]">2. INTEGRITAS DATA: Anti-Corruption Code</h3>
            <ul class="list-disc list-inside ml-4 text-sm space-y-1">
                <li>Penggunaan perangkat lunak pihak ketiga, modifikasi klien, atau *exploit* yang memberikan keuntungan non-standar **DILARANG KERAS** dan akan memicu **TERMINASI AKSES PERMANEN (HWID Ban)**.</li>
                <li>Segera laporkan setiap anomali (*bug*) yang ditemukan ke Admin. **Eksploitasi Cacat Sistem** dianggap pelanggaran berat.</li>
            </ul>
            <h3 class="font-bold mt-4 text-[var(--color-primary)]">3. ETIKA KOMUNIKASI: Jaga Frekuensi</h3>
            <ul class="list-disc list-inside ml-4 text-sm space-y-1">
                <li>Jaga **Zero Tolerance** terhadap Toxic Behavior, SARA, dan pelecehan verbal. Hormati sesama Player dan **PS Operators (Admin)**.</li>
                <li>Aktivitas **Spamming/Flooding** di In-Game Chat atau Saluran Komunitas dilarang untuk menjaga Bandwidth Komunikasi.</li>
            </ul>
            <h3 class="font-bold mt-4 text-[var(--color-primary)]">4. PROTOKOL DONASI: Resource Contribution</h3>
            <ul class="list-disc list-inside ml-4 text-sm space-y-1">
                <li>Kontribusi (Donasi) bersifat **sukarela** dan **NON-REFUNDABLE**. Pastikan keputusan Anda sudah final.</li>
                <li>Donasi adalah dukungan, bukan **Imunitas Protocol**. Semua pemain, terlepas dari donasi, tunduk pada Manifest ini.</li>
            </ul>
            <button class="absolute top-2 right-4 text-xl text-white/70 hover:text-[var(--color-secondary)]" onclick="closeModal('rules-modal')">&times;</button>
        </div>
    </div>
</div>

<div id="faq-modal" class="modal-overlay">
    <div class="flex justify-center items-center h-full p-4 sm:p-8">
        <div class="modal-content w-full max-w-lg bg-black/90 border-2 border-[var(--color-success)] shadow-2xl shadow-[var(--color-success)]/40 rounded-xl p-6 relative">
            <h2 class="font-orbitron text-2xl mb-4 text-center text-[var(--color-success)]" style="text-shadow: 0 0 5px var(--color-success);">FAQ: DATABASE Q & A</h2>
            <div class="space-y-4 text-sm sm:text-base text-white/90">
                <div>
                    <h3 class="font-bold text-[var(--color-primary)]">Q: [ERR 404] Akses ditolak/Gagal Terhubung ke GTZS-PS Core?</h3>
                    <p class="ml-4">A: Lakukan **Verifikasi Koneksi**: 1. Pastikan **Virtual Host/VPN Config** Anda telah **ACTIVATE**. 2. Periksa **Server Status** di halaman ini (harus **ONLINE**). 3. Lakukan **Re-login** klien game Anda.</p>
                </div>
                <div>
                    <h3 class="font-bold text-[var(--color-primary)]">Q: [DATA RETENTION] Seberapa aman data akun saya dari *WIPE/RESET*?</h3>
                    <p class="ml-4">A: Data disimpan dengan protokol **Multi-Layer Backup**. **Full Reset** hanya dipicu oleh **Kerusakan Data Mayor** atau **Major System Overhaul (Update Besar)**. Notifikasi akan disebarkan minimal 7 hari sebelum eksekusi.</p>
                </div>
                <div>
                    <h3 class="font-bold text-[var(--color-primary)]">Q: [RESOURCE ACQUISITION] Bagaimana cara mendapatkan Mata Uang/Item Eksklusif?</h3>
                    <p class="ml-4">A: Item langka diperoleh melalui **Event Global, Daily Login Rewards, Quest System**, atau **Kontribusi Sumber Daya (Donasi)**. Hubungi Admin (Link Kontak) untuk detail Donasi.</p>
                </div>
            </div>
            <button class="absolute top-2 right-4 text-xl text-white/70 hover:text-[var(--color-secondary)]" onclick="closeModal('faq-modal')">&times;</button>
        </div>
    </div>
</div>

<div id="toast-notification" class="fixed bottom-4 left-1/2 transform -translate-x-1/2 px-4 py-2 bg-black/80 text-white rounded-full border border-[var(--color-primary)]/50 text-sm hidden z-50">
    Link disalin!
</div>

<div id="custom-context-menu" class="absolute bg-black/90 border border-[var(--color-secondary)] p-2 rounded-lg shadow-xl z-50 hidden text-sm">
    <a href="#" class="block px-3 py-1 text-[var(--color-primary)] hover:bg-white/10" onclick="copyServerLink(event)">COPY SERVER LINK</a>
    <a href="#" class="block px-3 py-1 text-[var(--color-secondary)] hover:bg-white/10" onclick="showModal('rules-modal'); event.preventDefault()">VIEW RULES</a>
    <a href="https://wa.me/6281234567890" target="_blank" class="block px-3 py-1 text-[var(--color-success)] hover:bg-white/10">CONTACT ADMIN</a>
    <a href="#" class="block px-3 py-1 text-[var(--color-warning)] hover:bg-white/10" onclick="showModal('faq-modal'); event.preventDefault()">SHOW FAQ</a>
</div>


<script>
// ----------------------------------------------------
// ===== MENU DATA & GRID RENDERING (BARU) =====
// ----------------------------------------------------
const menuData = [
    { title: "WhatsApp Community", desc: "Grup komunitas, diskusi & pengumuman.", link: "https://chat.whatsapp.com/L1nKgrUP", action: "link", isSecondary: false, icon: '&#x2709;' },
    { title: "Virtual Host", desc: "Panel host virtual & resources.", link: "https://www.mediafire.com/file/gtzsbeta.txt", action: "download", isSecondary: false, icon: '&#x1f4bb;' },
    { title: "Power Tunnel", desc: "Jalur akses & optimasi.", link: "https://t.me/PowerTunnelBot", action: "copy", isSecondary: false, icon: '&#x26BF;' },
    { title: "Admin 1 (Utama)", desc: "Kontak admin utama & Donasi.", link: "https://wa.me/6281234567890", action: "link", isSecondary: true, icon: '&#x2709;' },
    { title: "Server Rules", desc: "Baca sebelum bermain.", action: "modal", modalId: 'rules-modal', isSecondary: false, icon: '&#x2699;' },
    { title: "FAQ (Tanya Jawab)", desc: "Pertanyaan umum.", action: "modal", modalId: 'faq-modal', isSecondary: false, icon: '&#x3f;' },
    { title: "Report Bug", desc: "Layanan 24 jam.", link: "https://wa.me/6281234567890", action: "link", isSecondary: true, icon: '&#x2709;' },
    { title: "Admin 2 (Teknis)", desc: "Bantuan teknis cepat.", link: "https://wa.me/6285678901234", action: "link", isSecondary: true, icon: '&#x2709;' },
];

const menuGrid = document.getElementById('menu-grid');
menuGrid.innerHTML = menuData.map(item => {
    
    // --- OPEN BUTTON HANDLER ---
    let openHandler = '';
    if (item.action === 'modal') {
        openHandler = `onclick="showModal('${item.modalId}'); playClickSound();"`;
    } else if (item.link) {
        openHandler = `href="${item.link}" target="_blank" onclick="playClickSound();"`;
    } else {
        openHandler = `href="#" onclick="showToast('Aksi Open tidak ditentukan.'); event.preventDefault();"`;
    }

    // --- SALIN BUTTON HANDLER ---
    let copyTarget = item.link || window.location.href; 
    let salinHandler = `onclick="copySpecificLink(event, '${copyTarget}');"`;

    // Warna disesuaikan dengan status/secondary
    const primaryColor = item.isSecondary ? 'var(--color-secondary)' : 'var(--color-primary)';
    
    return `
        <div class="holographic-card p-4 rounded-xl flex flex-col justify-between">
            <div>
                <div class="flex items-center gap-3 mb-2" style="color: ${primaryColor}; text-shadow: 0 0 5px ${primaryColor}60;">
                    <span class="text-2xl">${item.icon}</span>
                    <h3 class="font-orbitron font-bold text-lg leading-tight text-white">${item.title}</h3>
                </div>
                <p class="text-white/70 text-xs mb-3 min-h-[30px]">${item.desc}</p>
            </div>
            <div class="flex gap-2 mt-auto">
                <a ${openHandler} class="flex-1 text-center py-2 text-sm font-bold rounded-lg bg-[var(--color-primary)]/20 border border-[var(--color-primary)] text-[var(--color-primary)] hover:bg-[var(--color-primary)] hover:text-black transition duration-300">
                    OPEN
                </a>
                <button ${salinHandler} class="flex-1 py-2 text-sm font-bold rounded-lg bg-[var(--color-secondary)]/20 border border-[var(--color-secondary)] text-[var(--color-secondary)] hover:bg-[var(--color-secondary)] hover:text-black transition duration-300">
                    SALIN
                </button>
            </div>
        </div>
    `;
}).join('');

// --- FUNGSI COPY SPESIFIK LINK BARU ---
function copySpecificLink(e, linkToCopy) {
    e.preventDefault();
    playGlitchSound();
    navigator.clipboard.writeText(linkToCopy).then(() => {
        showToast('Link berhasil disalin!');
        hideContextMenu();
    }).catch(err => {
        console.error('Failed to copy text: ', err);
        showToast('Gagal menyalin link.');
    });
}
// ----------------------------------------------------
// ===== LOGIC SCRIPT LAINNYA (Disesuaikan) =====
// ----------------------------------------------------

// ... (Semua fungsi lain seperti scrambleText, showToast, showModal, closeModal, updateServerStatus, updateClock, startTerminalLog, initializeMusic tetap sama) ...
// Saya hanya memasukkan kembali fungsi-fungsi yang dimodifikasi.

const loadingOverlay = document.getElementById('loading-overlay');
const loadingText = document.getElementById('loading-text');
const loadingBar = document.getElementById('loading-bar');
const mainContainer = document.getElementById('main-container');
const loadingMessages = ["CONNECTING TO PS CORE...", "LOADING ASSETS & CONFIG...", "ENCRYPTING DATA STREAM...", "INITIATING SEQUENCE..."];

function startLoadingSequence() {
    // Teks Loading Baru
    loadingText.textContent = "LOADING SERVER...";
    const subtext = document.getElementById('loading-subtext');
    subtext.textContent = "Memuat aset neon & koneksi virtual...";
    
    let messageIndex = 0;
    let progress = 0;

    const loadingInterval = setInterval(() => {
        progress += 10;
        loadingBar.style.width = `${progress}%`;
        
        if (progress > 100) {
            clearInterval(loadingInterval);
            loadingOverlay.classList.add('opacity-0'); 
            return;
        }
        
        if (progress % 30 === 0 && messageIndex < loadingMessages.length) {
            // Scramble text tetap digunakan untuk efek transisi
            scrambleText(loadingText, loadingMessages[messageIndex], 500); 
            messageIndex++;
        }
    }, 300);

    // Hide overlay after a delay and start main content fade-in
    setTimeout(() => {
        loadingOverlay.style.display = 'none';
        document.getElementById('main-content-frame').style.opacity = '1';
    }, 4000); 
}

// 2. TEXT SCRAMBLE EFFECT (Tetap)
function scrambleText(element, newText, duration = 300) {
    const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890!@#$%^&*()_+';
    let originalText = element.textContent;
    let iterations = 0;
    const totalIterations = duration / 50; 

    const interval = setInterval(() => {
        element.textContent = Array.from(originalText)
            .map((char, index) => {
                if (index < iterations) {
                    return newText[index] || char;
                }
                return chars[Math.floor(Math.random() * chars.length)];
            })
            .join('');

        if (iterations >= newText.length) {
            clearInterval(interval);
            element.textContent = newText;
        }
        iterations += 1;
    }, 50);
}

// 1. SOUND CONTROL (Tetap)
const bgMusic = document.getElementById('background-music');
const clickFX = document.getElementById('click-fx');
const glitchFX = document.getElementById('glitch-fx');
const musicToggleBtn = document.getElementById('music-toggle-btn');
const musicIcon = document.getElementById('music-icon'); 
const musicText = document.getElementById('music-text'); 
let isMusicPlaying = false;

function playClickSound() {
    if (clickFX) {
        clickFX.currentTime = 0;
        clickFX.play().catch(e => console.log('Click sound failed to play:', e));
    }
}

function playGlitchSound() {
    if (glitchFX) {
        glitchFX.currentTime = 0;
        glitchFX.play().catch(e => console.log('Glitch sound failed to play:', e));
    }
}

function initializeMusic() {
    bgMusic.volume = 0.3;
    musicIcon.textContent = 'ðŸ”‡'; 
    musicText.textContent = 'OFF';
    isMusicPlaying = false;

    musicToggleBtn.addEventListener('click', () => {
        playClickSound();
        if (isMusicPlaying) {
            bgMusic.pause();
            musicIcon.textContent = 'ðŸ”‡'; 
            musicText.textContent = 'OFF';
            isMusicPlaying = false;
        } else {
            bgMusic.play().then(() => {
                musicIcon.textContent = 'ðŸ”Š'; 
                musicText.textContent = 'ON';
                isMusicPlaying = true;
            }).catch(e => {
                console.log('Music play failed:', e);
                showToast('Music blocked by browser. Please try clicking the page or button again.');
                musicIcon.textContent = 'ðŸ”‡'; 
                musicText.textContent = 'OFF';
                isMusicPlaying = false;
            });
        }
    });
}


// 3. TOAST NOTIFICATION (Tetap)
function showToast(message) {
    const toast = document.getElementById('toast-notification');
    toast.textContent = message;
    toast.classList.remove('hidden');
    
    setTimeout(() => {
        toast.classList.add('hidden');
    }, 2500);
}


// 4. MODAL CONTROL (Tetap)
function showModal(id) {
    playClickSound();
    document.getElementById(id).classList.add('active');
    document.getElementById('main-container').style.filter = 'blur(5px)';
}

function closeModal(id) {
    playClickSound();
    document.getElementById(id).classList.remove('active');
    document.getElementById('main-container').style.filter = '';
}

// 5. COPY SERVER LINK (Tetap untuk Context Menu)
function copyServerLink(e) {
    e.preventDefault();
    playGlitchSound();
    const serverLink = window.location.href; 
    navigator.clipboard.writeText(serverLink).then(() => {
        showToast('Server Link Disalin!');
        hideContextMenu();
    }).catch(err => {
        console.error('Failed to copy text: ', err);
        showToast('Gagal menyalin link.');
    });
}


// 6. CONTEXT MENU (Tetap)
const customContextMenu = document.getElementById('custom-context-menu');
document.addEventListener('contextmenu', (e) => {
    e.preventDefault();
    customContextMenu.style.top = `${e.clientY}px`;
    customContextMenu.style.left = `${e.clientX}px`;
    customContextMenu.style.display = 'block';

    const menuWidth = customContextMenu.offsetWidth;
    const menuHeight = customContextMenu.offsetHeight;
    if (e.clientX + menuWidth > window.innerWidth) {
        customContextMenu.style.left = `${e.clientX - menuWidth}px`;
    }
    if (e.clientY + menuHeight > window.innerHeight) {
        customContextMenu.style.top = `${e.clientY - menuHeight}px`;
    }
});

document.addEventListener('click', () => {
    hideContextMenu();
});

function hideContextMenu() {
    customContextMenu.style.display = 'none';
}


// 7. DATA & CORE FUNCTIONS (Tetap)
const serverStatusElement = document.getElementById('server-status');
const playerCountElement = document.getElementById('player-count');
const healthBar = document.getElementById('server-health-bar');
const statusPulse = document.getElementById('status-pulse');
let isServerOnline = true;

function updateServerStatus() {
    const playerCount = Math.floor(Math.random() * (500 - 150 + 1)) + 150; 
    const isOnline = Math.random() < 0.95; 
    const loadPercentage = Math.floor(Math.random() * (90 - 30 + 1)) + 30;

    playerCountElement.textContent = playerCount.toLocaleString();

    if (isOnline) {
        if (!isServerOnline) {
            scrambleText(serverStatusElement, 'ONLINE', 100);
            isServerOnline = true;
        } else {
            serverStatusElement.textContent = 'ONLINE';
        }
        
        serverStatusElement.className = 'text-[var(--color-success)]';
        statusPulse.className = 'absolute w-2 h-2 rounded-full top-2 right-2 bg-[var(--color-success)]';
        statusPulse.style.animation = 'pulse-status 2s infinite';
    } else {
        if (isServerOnline) {
            playGlitchSound();
            scrambleText(serverStatusElement, 'OFFLINE', 300);
            isServerOnline = false;
        } else {
            serverStatusElement.textContent = 'OFFLINE';
        }
        
        serverStatusElement.className = 'text-[var(--color-secondary)]';
        statusPulse.className = 'absolute w-2 h-2 rounded-full top-2 right-2 bg-[var(--color-secondary)]';
        statusPulse.style.animation = 'none';
    }

    healthBar.style.width = loadPercentage + '%';
    let color;
    if (loadPercentage < 50) {
        color = 'var(--color-primary)'; 
    } else if (loadPercentage < 80) {
        color = 'var(--color-warning)'; 
    } else {
        color = 'var(--color-secondary)'; 
    }
    healthBar.style.backgroundColor = color;
}


// 8. LIVE CLOCK (MULTI-ZONE) (Tetap)
function getFormattedTime(timeZone) {
    const options = { 
        hour: '2-digit', 
        minute: '2-digit', 
        second: '2-digit', 
        timeZone: timeZone,
        hour12: false 
    };
    return new Date().toLocaleTimeString('en-US', options); 
}

function updateClock() {
    const wibElement = document.getElementById('wib-clock');
    const witaElement = document.getElementById('wita-clock');
    const witElement = document.getElementById('wit-clock');

    const wibTime = getFormattedTime('Asia/Jakarta');
    wibElement.textContent = `WIB: ${wibTime}`;

    const witaTime = getFormattedTime('Asia/Makassar');
    witaElement.textContent = `WITA: ${witaTime}`;

    const witTime = getFormattedTime('Asia/Jayapura');
    witElement.textContent = `WIT: ${witTime}`;
}

// 9. TAGLINE ANIMATION (Dihapus dari header, karena frame baru tidak memiliki ruang, tapi fungsi dipertahankan)
const taglines = [
    "Welcome to GTZS Private Server ðŸŽ®",
    "Cyberpunk Racing, Optimized Mobile",
    "High Ping, High Risk, High Reward",
    "INIT: Core Systems Online...",
    "Join our WhatsApp Community Now!"
];
// Tidak perlu menjalankan startTickerAnimation karena elemen tagline sudah dihapus/dipindahkan.

// 10. TERMINAL LOG (DESKTOP ONLY) (Tetap)
const terminalLog = document.getElementById('terminal-log');
const logMessages = [
    "[INFO]: System check initiated...",
    "[INFO]: Server ping successful: 10ms",
    "[LOAD]: Player configuration loaded.",
    "[SEC]: Anti-DDoS Shield active.",
    "[CORE]: Welcome. Ready for input."
];
let currentLogIndex = 0;

function appendLogEntry(message) {
    const logDiv = document.createElement('div');
    logDiv.className = 'log-entry';
    terminalLog.appendChild(logDiv);
    
    let charIndex = 0;
    const typeInterval = setInterval(() => {
        if (charIndex < message.length) {
            logDiv.textContent += message.charAt(charIndex);
            charIndex++;
            terminalLog.scrollTop = terminalLog.scrollHeight; 
        } else {
            clearInterval(typeInterval);
            Array.from(terminalLog.children).forEach(child => {
                const cursor = child.querySelector('.cursor-blink');
                if (cursor) cursor.remove();
            });
            const cursorSpan = document.createElement('span');
            cursorSpan.textContent = ' _';
            cursorSpan.classList.add('cursor-blink');
            logDiv.appendChild(cursorSpan);
        }
    }, 20); 

    if (terminalLog.children.length > 5) {
        terminalLog.removeChild(terminalLog.children[0]);
    }
}

function startTerminalLog() {
    if (window.innerWidth < 640) return; 

    const nextLog = () => {
        if (currentLogIndex >= logMessages.length) {
            currentLogIndex = 0; 
        }
        appendLogEntry(logMessages[currentLogIndex]);
        currentLogIndex++;
        
        setTimeout(nextLog, Math.random() * 7000 + 8000); 
    };

    setTimeout(nextLog, 2000); 
}


// --- INITIALIZATION ---
window.onload = () => {
    document.getElementById('current-year').textContent = new Date().getFullYear();
    
    updateClock(); 
    updateServerStatus();
    setInterval(updateClock, 1000); 
    setInterval(updateServerStatus, 10000); 
    
    initializeMusic();
    startTerminalLog();
    startLoadingSequence(); 

    // Apply color scheme di awal
    applyColorScheme(colorSchemes[currentColorIndex]);

    // Konfigurasi TSParticles (Tetap)
    tsParticles.load({
      id: "tsparticles-gtzps",
      options: {
         particles: {
            color: { value: ["#00e6ff", "#ff00d4", "#00ff90"] },
            move: { direction: "none", enable: true, outModes: { default: "bounce" }, random: true, speed: 2, straight: false, trail: { enable: true, length: 10, fill: { color: { value: "#ffffff", opacity: 0.1 } } } }, 
            number: { density: { enable: true, area: 800 }, value: 120 },
            opacity: { value: 0.7, animation: { enable: true, speed: 0.5, sync: false, startValue: "random", destroy: "min" } },
            shape: { type: "square" }, 
            size: { value: { min: 1, max: 3 } }, 
            links: { enable: false } 
         },
         fullScreen: { enable: false },
         detectRetina: true,
      },
    }).catch(error => {
        console.error("TSParticles failed to load:", error);
    });
};

// --- COLOR TOGGLE LOGIC (Tetap) ---
const colorToggleBtn = document.getElementById('color-toggle-btn');
const root = document.documentElement;
const gridBg = document.getElementById('grid-bg');
const colorSchemes = [
    {
        name: 'CYAN/MAGENTA',
        primary: '#00e6ff', 
        secondary: '#ff00d4', 
        success: '#00ff90', 
        warning: '#ff8c00',
        borderColor: '#ff00d4' 
    },
    {
        name: 'GREEN/ORANGE',
        primary: '#00ff90',
        secondary: '#ff8c00', 
        success: '#00e6ff', 
        warning: '#ff00d4',
        borderColor: '#00ff90' 
    }
];
let currentColorIndex = 0;

function applyColorScheme(scheme) {
    root.style.setProperty('--color-primary', scheme.primary);
    root.style.setProperty('--color-secondary', scheme.secondary);
    root.style.setProperty('--color-success', scheme.success);
    root.style.setProperty('--color-warning', scheme.warning);
    
    colorToggleBtn.style.borderColor = scheme.borderColor; 

    // Hapus Elemen Feature Image
    // const mainImage = document.getElementById('main-feature-image');
    // if (mainImage) mainImage.remove(); 

    if(scheme.name === 'GREEN/ORANGE') {
        gridBg.style.backgroundImage = 'linear-gradient(rgba(0,255,144,0.08) 1px, transparent 1px),linear-gradient(90deg, rgba(255,140,0,0.08) 1px, transparent 1px)';
    } else {
        gridBg.style.backgroundImage = 'linear-gradient(rgba(0,255,255,0.08) 1px, transparent 1px),linear-gradient(90deg, rgba(255,0,212,0.08) 1px, transparent 1px)';
    }
    
    document.querySelectorAll('.data-frame').forEach(el => {
        el.style.borderColor = scheme.primary; 
        el.style.boxShadow = `0 0 10px ${scheme.primary}4D`; 
    });
    
    // Perbarui border frame utama
    const mainFrame = document.getElementById('main-content-frame');
    if (mainFrame) {
         mainFrame.style.borderColor = scheme.primary;
         mainFrame.style.boxShadow = `0 0 30px ${scheme.primary}50, inset 0 0 15px ${scheme.secondary}50`;
    }
    
    updateClock(); 
    showToast(`Color Scheme: ${scheme.name} Applied!`);
}

colorToggleBtn.onclick = () => {
    playClickSound();
    currentColorIndex = (currentColorIndex + 1) % colorSchemes.length;
    applyColorScheme(colorSchemes[currentColorIndex]);
};

</script>
</body>
</html>